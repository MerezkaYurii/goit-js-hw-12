{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const MY_KEY =\"47340673-7535cec7cd04a1914e8f8d439\";\nimport axios from \"axios\";\nconst URL = \"https://pixabay.com/api/\";\n\n\nexport async function serchCategory(categ, page = 1){\n  const response = await axios(URL, {\n    params:{\n    key: MY_KEY, \n    q: categ, \n    image_type: \"foto\",\n    orientation: \"horizontal\", \n    safesearch: true,\n    page, \n    per_page: 15, \n\n      }\n   })\n \n  return response.data\n}\n\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst containerGallery = document.querySelector(\".gallery\");\n\n\nlet box;\n\nexport function createMarkup(arr){\n\n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>`\n     <a class=\"gallery-link\" href=${largeImageURL}>\n    <img class=\"gallery-image\" src=${webformatURL} alt=${tags}>\n    \n     <div class=\"img-list\">\n\n               <div class=\"field\">\n      <h3 class=\"label\">Likes</h3>\n      <p class=\"value\">${likes}</p>\n              </div>\n                  <div class=\"field\">\n      <h3 class=\"label\">Views</h3>\n     <p class=\"value\">${views}</p>\n              </div>\n                  <div class=\"field\">\n      <h3 class=\"label\">Comments</h3>\n     <p class=\"value\">${comments}</p>\n              </div>\n                  <div class=\"field\">\n      <h3 class=\"label\">Downloads</h3>\n     <p class=\"value\">${downloads}</p>\n              </div>\n    </div>\n    </a>\n       `).join(\"\");\n    \n\n\nif (!box) {\n    box = new SimpleLightbox(\".gallery a\", {\n        captionsData: \"alt\",\n        captionDelay: 250,\n    });\n} else {\n    box.refresh();\n}\n\n}\n\n\n\n\n\n\nexport function clear() {\n    containerGallery.innerHTML = \"\";\n}\n\n\n\n\n\n","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nimport {serchCategory} from \"./js/pixabay-api\";\nimport {createMarkup, clear} from \"./js/render-functions\";\n\n\niziToast.settings({\n    position: 'topRight',\n  });\n\n\n const loading = document.querySelector(\".js-hidden\")\nconst containerGallery = document.querySelector(\".gallery\");\nconst form = document.querySelector(\".form\");\nform.addEventListener(\"submit\", submitInput);\nconst btnLoadMore = document.querySelector(\".load-more-hidden\");\nbtnLoadMore.addEventListener(\"click\", handelLoadeMore)\n\n\n\nlet category =\"\";\n\n function submitInput (event) {\n    event.preventDefault();\n category = event.target.elements.category.value.trim();\nif(!category) {\n  iziToast.error({\n    // title: 'Error',\n    message: \"Sorry, there are no images matching your search query. Please try again!\",\n    iconUrl: \"../img/error.png\",  \n    iconColor: '#fff',\n    imageWidth: 15,\n    messageColor: '#fff',\n    titleColor: '#fff',\n  }) ;\n  clear()\n return \n}\n\nclear();\nloading.classList.remove(\"hidden\");\n \n\nserchCategory(category, page)\n .then( data => {\n\n  \nif(data.hits.length === 0){\n  iziToast.error({\n    // title: 'Error',\n    message:  \"No images found\", \n    iconUrl: \"../img/error.png\",  \n    iconColor: '#fff',\n    imageWidth: 15,\n    messageColor: '#fff',\n    titleColor: '#fff',\n  });\n \n  return;\n}\n  \n  containerGallery.insertAdjacentHTML(\"beforeend\", createMarkup(data.hits));\n  loading.classList.remove(\"hidden\")\nif(data.hits.length * page < data.totalHits){\n\n    btnLoadMore.classList.replace(\"load-more-hidden\", \"button-load-more\");\n}\n\n  litebox.refresh();\n\n  })\n   .catch((error) => {\n  iziToast.error({\n    // title: 'Error',\n    message:   \"Error fetching images. Please try again.\", \n    iconUrl: \"../img/error.png\",  \n    iconColor: '#fff',\n    imageWidth: 15,\n    messageColor: '#fff',\n    titleColor: '#fff',\n  });\n })\n.finally (() => {\n  event.target.reset()\n  loading.classList.add(\"hidden\")\n});\n}\n\n\n\nlet litebox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionClass: 'imageTitle',\n});\n\n\n\nlet page = 33;\nasync function handelLoadeMore(){\npage += 1;\n\nbtnLoadMore.disabled = true;\n\ntry{\n  const data = await serchCategory(category, page)\n \ncontainerGallery.insertAdjacentHTML(\"beforeend\", createMarkup(data.hits));\n\nif(data.hits.length * page >= data.totalHits){\n  btnLoadMore.classList.replace(\"button-load-more\", \"load-more-hidden\");\n  iziToast.error({\n    // title: 'Error',\n    message:   \"We're sorry, but you've reached the end of search results.\", \n    iconUrl: \"../img/error.png\",  \n    iconColor: '#fff',\n    imageWidth: 15,\n    messageColor: '#fff',\n    titleColor: '#fff',\n  });\n  }\n\nconst card = document.querySelector(\".img-list\");\nwindow.scrollBy({\n  left: 0, \n  top: 400, \n  behavior: \"smooth\", \n})\n\n}catch(error) { iziToast.error({\n  // title: 'Error',\n  message:   \"We're sorry, but you've reached the end of search results.\", \n  iconUrl: \"../img/error.png\",  \n  iconColor: '#fff',\n  imageWidth: 15,\n  messageColor: '#fff',\n  titleColor: '#fff',\n});\n} finally{btnLoadMore.disabled = false;}\n }\n"],"names":["MY_KEY","URL","serchCategory","categ","page","axios","containerGallery","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clear","iziToast","loading","form","submitInput","btnLoadMore","handelLoadeMore","category","event","data","litebox","error","SimpleLightbox","card"],"mappings":"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"}