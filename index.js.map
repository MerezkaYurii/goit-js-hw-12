{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const MY_KEY =\"47340673-7535cec7cd04a1914e8f8d439\";\nimport axios from \"axios\";\nconst URL = \"https://pixabay.com/api/\";\nconst per_page = 15;\nexport async function serchCategory(categ, page = 1){\n  const response = await axios(URL, {\n    params:{\n    key: MY_KEY, \n    q: categ, \n    image_type: \"foto\",\n    orientation: \"horizontal\", \n    safesearch: true,\n    page, \n    per_page,  \n\n      }\n   })\n    \n  return response.data\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst containerGallery = document.querySelector(\".gallery\");\n\n\nlet box;\n\nexport function createMarkup(arr){\n\n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>`\n     <a class=\"gallery-link\" href=${largeImageURL}>\n    <img class=\"gallery-image\" src=${webformatURL} alt=${tags}>\n    \n     <div class=\"img-list\">\n\n               <div class=\"field\">\n      <h3 class=\"label\">Likes</h3>\n      <p class=\"value\">${likes}</p>\n              </div>\n                  <div class=\"field\">\n      <h3 class=\"label\">Views</h3>\n     <p class=\"value\">${views}</p>\n              </div>\n                  <div class=\"field\">\n      <h3 class=\"label\">Comments</h3>\n     <p class=\"value\">${comments}</p>\n              </div>\n                  <div class=\"field\">\n      <h3 class=\"label\">Downloads</h3>\n     <p class=\"value\">${downloads}</p>\n              </div>\n    </div>\n    </a>\n       `).join(\"\");\n    \n\n\n\nif (!box) {\n    box = new SimpleLightbox(\".gallery a\", {\n        captionsData: \"alt\",\n        captionDelay: 250,\n    });\n} else {\n    box.refresh();\n}\n\n}\n\n\n\n\n\nexport function clear() {\n    containerGallery.innerHTML = \"\";\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport {serchCategory} from \"./js/pixabay-api\";\nimport {createMarkup, clear} from \"./js/render-functions\";\n\niziToast.settings({\n    position: 'topRight',\n  });\n\n  let litebox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    captionClass: 'imageTitle',\n  });\nconst loading = document.querySelector(\".loading\");\nconst containerGallery = document.querySelector(\".gallery\");\nconst form = document.querySelector(\".form\");\nform.addEventListener(\"submit\", submitInput);\nconst btnLoadMore = document.querySelector(\".load-more-hidden\");\nbtnLoadMore.addEventListener(\"click\", handelLoadeMore);\nconst per_page = 15;\n\nlet page = 1;\nlet category =\"\";\n\n\n\n\n\nasync function submitInput (event) {\n    event.preventDefault();\n    // page = 1;\n category = event.target.elements.category.value.trim();\n\n   containerGallery.innerHTML = \"\"; \n\nif(!category) {\n  btnLoadMore.classList.replace(\"button-load-more\", \"load-more-hidden\");\n  iziToast.error({\n    // title: 'Error',\n    message: \"Sorry, there are no images matching your search query. Please try again!\",\n    iconUrl: \"../img/error.svg\",  \n    iconColor: '#fff',\n    imageWidth: 15,\n    messageColor: '#fff',\n    titleColor: '#fff',\n  }) ;\n  clear();\n return;\n}\n\nclear();\nloading.classList.remove(\"hidden\");\n  page = 1;\n \n try {\n  const data = await serchCategory(category, page)\nif(!data.hits.length){\n  btnLoadMore.classList.replace(\"button-load-more\", \"load-more-hidden\");\n  iziToast.error({\n    // title: 'Error',\n    message:  \"No images found\", \n    iconUrl: \"../img/error.svg\",  \n    iconColor: '#fff',\n    imageWidth: 15,\n    messageColor: '#fff',\n    titleColor: '#fff',\n  });\n  return;\n}\n  containerGallery.insertAdjacentHTML(\"beforeend\", createMarkup(data.hits));\n  loading.classList.remove(\"hidden\")\n  litebox.refresh(); \n  \n  const totalPages = Math.ceil(data.totalHits / per_page);\n\n\n\nif(page > totalPages){\n    btnLoadMore.classList.replace(\"button-load-more\", \"load-more-hidden\");\n    litebox.refresh();\n}else{\n  btnLoadMore.classList.replace(\"load-more-hidden\", \"button-load-more\");\n}\nif(data.hits.length < per_page){\n  btnLoadMore.classList.replace(\"button-load-more\", \"load-more-hidden\");\n  }\n\n \n}catch{(error) => {\n\n    console.log(error.message);\n    \n  iziToast.error({\n    // title: 'Error',\n    message: `${error.message}`, \n    iconUrl: \"../img/error.svg\",  \n    iconColor: '#fff',\n    imageWidth: 15,\n    messageColor: '#fff',\n    titleColor: '#fff',\n  });\n }}\nfinally  {\n  event.target.reset()\n  loading.classList.add(\"hidden\")\n};\n litebox.refresh()\n}\n\n\n\nasync function handelLoadeMore(){\npage += 1;\nbtnLoadMore.disabled = true;\n\ntry{\n  const data = await serchCategory(category, page);\n \ncontainerGallery.insertAdjacentHTML(\"beforeend\", createMarkup(data.hits));\nloading.classList.remove(\"hidden\");\n\nconst totalPages = Math.ceil(data.totalHits / per_page);\nconsole.log(page);\n\nif(page >= totalPages || !totalPages){\n  btnLoadMore.classList.replace(\"button-load-more\", \"load-more-hidden\");\n  iziToast.error({\n    // title: 'Error',\n    message:   \"We're sorry, but you've reached the end of search results.\", \n    iconUrl: \"../img/error.svg\",  \n    iconColor: '#fff',\n    imageWidth: 15,\n    messageColor: '#fff',\n    titleColor: '#0099FF',\n  });\n}\n  // if(data.hits.length < per_page){\n  //   btnLoadMore.classList.replace(\"button-load-more\", \"load-more-hidden\");\n  //   }\n \n\n\nconst card = document.querySelector(\".img-list\");\nwindow.scrollBy({\n  left: 0, \n  top: 400, \n  behavior: \"smooth\", \n})\n\n\n}catch(error) { iziToast.error({\n  // title: 'Error',\n  message:   \"We're sorry, but you've reached the end of search results.\", \n  iconUrl: \"../img/error.svg\",  \n  iconColor: '#fff',\n  imageWidth: 15,\n  messageColor: '#fff',\n  titleColor: '#0099FF',\n});\n} finally{\n  btnLoadMore.disabled = false;\n  loading.classList.add(\"hidden\");\n }\n litebox.refresh()\n\n }"],"names":["MY_KEY","URL","per_page","serchCategory","categ","page","axios","containerGallery","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clear","iziToast","litebox","SimpleLightbox","loading","form","submitInput","btnLoadMore","handelLoadeMore","category","event","data","totalPages","card"],"mappings":"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"}